{"ast":null,"code":"import _slicedToArray from\"/Users/rhopperlowe/Desktop/School/Spring 2020/Spring2020_workspace/bank/bank-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState}from'react';import{Container}from'../../common/StyleClasses';import{FormControl}from'baseui/form-control';import AppContext from'../../context/AppContext';import{Checkbox}from'baseui/checkbox';import{Input}from'baseui/input';import{RadioGroup,Radio,ALIGN}from'baseui/radio';import{Button}from'baseui/button';import{accountOpen}from'../../backend/api';import{useHistory}from'react-router-dom';import ErrorBox from'../../common/ErrorBox';var OpenAccount=function OpenAccount(){var _useContext=useContext(AppContext),auth=_useContext.auth,app=_useContext.app,appErr=_useContext.appErr,setError=_useContext.setError;var history=useHistory();var _useState=useState(auth.isLoggedIn?auth.currentUser.id:undefined),_useState2=_slicedToArray(_useState,2),ownerId=_useState2[0],setOwnerId=_useState2[1];var _useState3=useState(\"Checking\"),_useState4=_slicedToArray(_useState3,2),type=_useState4[0],setType=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),amount=_useState6[0],setAmount=_useState6[1];return/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(\"h2\",null,\"Open a new account\"),/*#__PURE__*/React.createElement(ErrorBox,{error:appErr}),/*#__PURE__*/React.createElement(\"form\",{onSubmit:function onSubmit(e){e.preventDefault();if(amount<0){setError(\"Initial deposit cannot be negative\");return false;}setError(\"\");accountOpen({ownerId:ownerId,type:type,amount:amount}).then(function(_ref){var account=_ref.account;console.log(\"Successfully opened account: \",account);history.push('/');}).catch(function(error){setError(error.message);console.error(error);});}},/*#__PURE__*/React.createElement(FormControl,{label:function label(){return\"Who is this account for?\";}},/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Input,{type:\"number\",value:ownerId,onChange:function onChange(e){return setOwnerId(e.target.value);},startEnhancer:function startEnhancer(){return\"#\";}}),auth.isLoggedIn&&/*#__PURE__*/React.createElement(Checkbox,{checked:ownerId===auth.currentUser.id,onChange:function onChange(e){setOwnerId(e.target.checked?auth.currentUser.id:0);}},\"This account is for me\"))),/*#__PURE__*/React.createElement(FormControl,{label:function label(){return\"What type of account is this?\";}},/*#__PURE__*/React.createElement(RadioGroup,{value:type,onChange:function onChange(e){return setType(e.target.value);},name:\"type\",align:ALIGN.vertical},/*#__PURE__*/React.createElement(Radio,{value:\"Checking\"},\"Checking\"),/*#__PURE__*/React.createElement(Radio,{value:\"Savings\"},\"Savings\"),/*#__PURE__*/React.createElement(Radio,{value:\"Brokerage\"},\"Brokerage\"))),/*#__PURE__*/React.createElement(FormControl,{label:function label(){return\"Would you like to make an initial deposit?\";}},/*#__PURE__*/React.createElement(Input,{type:\"number\",startEnhancer:function startEnhancer(){return\"$\";},value:amount,onChange:function onChange(e){return setAmount(e.target.value);}})),/*#__PURE__*/React.createElement(Button,null,\"Open Account\")));};export default OpenAccount;","map":{"version":3,"sources":["/Users/rhopperlowe/Desktop/School/Spring 2020/Spring2020_workspace/bank/bank-frontend/src/pages/user-accounts/OpenAccount.jsx"],"names":["React","useContext","useState","Container","FormControl","AppContext","Checkbox","Input","RadioGroup","Radio","ALIGN","Button","accountOpen","useHistory","ErrorBox","OpenAccount","auth","app","appErr","setError","history","isLoggedIn","currentUser","id","undefined","ownerId","setOwnerId","type","setType","amount","setAmount","e","preventDefault","then","account","console","log","push","catch","error","message","target","value","checked","vertical"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from 'react';\nimport { Container } from '../../common/StyleClasses';\nimport { FormControl } from 'baseui/form-control';\nimport AppContext from '../../context/AppContext';\nimport { Checkbox } from 'baseui/checkbox';\nimport { Input } from 'baseui/input';\nimport { RadioGroup, Radio, ALIGN } from 'baseui/radio';\nimport { Button } from 'baseui/button';\nimport { accountOpen } from '../../backend/api';\nimport { useHistory } from 'react-router-dom';\nimport ErrorBox from '../../common/ErrorBox';\n\nconst OpenAccount = () => {\n\n  const { auth, app, appErr, setError } = useContext(AppContext);\n\n  const history = useHistory();\n\n  const [ownerId, setOwnerId] = useState(auth.isLoggedIn ? auth.currentUser.id : undefined);\n  const [type, setType] = useState(\"Checking\");\n  const [amount, setAmount] = useState(0);\n\n\n  return (\n    <Container>\n      <h2>Open a new account</h2>\n      <ErrorBox error={appErr} />\n      <form onSubmit={(e) => {\n        e.preventDefault();\n\n        if (amount < 0) {\n          setError(\"Initial deposit cannot be negative\");\n          return false;\n        }\n\n        setError(\"\");\n\n        accountOpen({ ownerId, type, amount })\n        .then(({ account }) => {\n          console.log(\"Successfully opened account: \", account);\n          history.push('/');\n        })\n        .catch(error => {\n          setError(error.message);\n          console.error(error);\n        })\n      }}>\n        <FormControl label={() => \"Who is this account for?\"}>\n          <React.Fragment>\n            <Input \n              type=\"number\"\n              value={ownerId}\n              onChange={(e) => setOwnerId(e.target.value)}\n              startEnhancer={() => \"#\"}\n            />\n            {auth.isLoggedIn && (\n              <Checkbox\n                checked={ownerId === auth.currentUser.id}\n                onChange={(e) => {\n                  setOwnerId(e.target.checked ? auth.currentUser.id : 0)\n                }}\n              >\n                This account is for me\n              </Checkbox>\n            )}\n          </React.Fragment>\n        </FormControl>\n\n        <FormControl label={() => \"What type of account is this?\"}>\n          <RadioGroup\n            value={type}\n            onChange={(e) => setType(e.target.value)}\n            name=\"type\"\n            align={ALIGN.vertical}\n          >\n            <Radio value=\"Checking\">Checking</Radio>\n            <Radio value=\"Savings\">Savings</Radio>\n            <Radio value=\"Brokerage\">Brokerage</Radio>\n          </RadioGroup>\n        </FormControl>\n\n        <FormControl label={() => \"Would you like to make an initial deposit?\"}>\n          <Input\n            type=\"number\"\n            startEnhancer={() => \"$\"}\n            value={amount}\n            onChange={e => setAmount(e.target.value)}\n          />\n        </FormControl>\n\n        <Button>Open Account</Button>\n      </form>\n    </Container>\n  );\n};\n\nexport default OpenAccount;"]},"metadata":{},"sourceType":"module"}