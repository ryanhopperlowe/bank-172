{"ast":null,"code":"var _jsxFileName = \"/Users/rhopperlowe/Desktop/School/Spring 2020/Spring2020_workspace/bank/bank-frontend/src/pages/user-accounts/forms/TransactionForm.jsx\";\nimport React, { useEffect, useState, useContext } from 'react';\nimport { FormControl } from 'baseui/form-control';\nimport { Input, MaskedInput } from 'baseui/input';\nimport { Button } from 'baseui/button';\nimport AppContext from '../../../context/AppContext';\nimport { accountDeposit, accountWithdraw, accountTransfer } from '../../../backend/api';\nimport { useHistory } from 'react-router-dom';\nimport UserAccountContext from '../../../context/UserAccountContext';\nimport ErrorBox from '../../../common/ErrorBox';\n\nconst TransactionForm = props => {\n  const {\n    account,\n    transactionType\n  } = props;\n  const {\n    auth\n  } = useContext(AppContext);\n  const {\n    loadAccounts,\n    setNotify\n  } = useContext(UserAccountContext);\n  const [error, setError] = useState(\"\");\n  const history = useHistory();\n  const [amount, setAmount] = useState(0.00);\n  const [destination, setDestination] = useState(0);\n  useEffect(() => {\n    console.log(account);\n    console.log(props);\n  }, []);\n  return /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: e => {\n      e.preventDefault();\n\n      if (amount <= 0) {\n        setError(\"Amount must be greater than 0\");\n        return false;\n      }\n\n      let transactionProm;\n\n      switch (transactionType) {\n        case 'Deposit':\n          transactionProm = accountDeposit(account.number, amount);\n          break;\n\n        case 'Withdraw':\n          transactionProm = accountWithdraw(account.number, amount, auth.currentUser);\n          break;\n\n        case 'Transfer':\n          transactionProm = accountTransfer(account.number, destination, amount, auth.currentUser);\n          break;\n\n        default:\n          transactionProm = Promise.reject(new Error(\"Invalid transactionType: '\" + transactionType + \"'\"));\n          break;\n      }\n\n      ;\n      transactionProm.then(response => {\n        console.log(response);\n        loadAccounts();\n        setNotify(transactionType + \" successful!\");\n        setError(\"\");\n      }).catch(error => {\n        setError(error.message);\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(FormControl, {\n    label: () => transactionType + \" amount:\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    type: \"number\",\n    value: amount,\n    onChange: e => setAmount(e.target.value),\n    startEnhancer: \"$\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  })), transactionType === \"Transfer\" && /*#__PURE__*/React.createElement(FormControl, {\n    label: () => \"Destination Account #:\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    type: \"number\",\n    value: destination,\n    onChange: e => setDestination(e.target.value),\n    startEnhancer: \"#\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(ErrorBox, {\n    error: error,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }\n  }, \"Submit\"));\n};\n\nexport default TransactionForm;","map":{"version":3,"sources":["/Users/rhopperlowe/Desktop/School/Spring 2020/Spring2020_workspace/bank/bank-frontend/src/pages/user-accounts/forms/TransactionForm.jsx"],"names":["React","useEffect","useState","useContext","FormControl","Input","MaskedInput","Button","AppContext","accountDeposit","accountWithdraw","accountTransfer","useHistory","UserAccountContext","ErrorBox","TransactionForm","props","account","transactionType","auth","loadAccounts","setNotify","error","setError","history","amount","setAmount","destination","setDestination","console","log","e","preventDefault","transactionProm","number","currentUser","Promise","reject","Error","then","response","catch","message","target","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\nimport { FormControl } from 'baseui/form-control';\nimport { Input, MaskedInput } from 'baseui/input';\nimport { Button } from 'baseui/button';\nimport AppContext from '../../../context/AppContext';\nimport { accountDeposit, accountWithdraw, accountTransfer } from '../../../backend/api';\nimport { useHistory } from 'react-router-dom';\nimport UserAccountContext from '../../../context/UserAccountContext';\nimport ErrorBox from '../../../common/ErrorBox';\n\nconst TransactionForm = (props) => {\n  const { account, transactionType } = props;\n  const { auth } = useContext(AppContext);\n  const { loadAccounts, setNotify } = useContext(UserAccountContext);\n  const [error, setError] = useState(\"\");\n  const history = useHistory();\n\n  const [amount, setAmount] = useState(0.00);\n  const [destination, setDestination] = useState(0);\n\n  useEffect(() => {\n    console.log(account);\n    console.log(props);\n    \n  }, []);\n\n  return (\n    <form onSubmit={(e) => {\n      e.preventDefault();\n      if (amount <= 0) {\n        setError(\"Amount must be greater than 0\");\n        return false;\n      }\n\n      let transactionProm;\n\n      switch (transactionType) {\n        case 'Deposit':\n          transactionProm = accountDeposit(account.number, amount);\n          break;\n        \n        case 'Withdraw':\n          transactionProm = accountWithdraw(account.number, amount, auth.currentUser);\n          break;\n        \n        case 'Transfer':\n          transactionProm = accountTransfer(account.number, destination, amount, auth.currentUser)\n          break;\n\n        default:\n          transactionProm = Promise.reject(new Error(\"Invalid transactionType: '\" + transactionType + \"'\"));\n          break;\n      };\n\n      transactionProm\n      .then(response => {\n        console.log(response);\n        loadAccounts();\n        setNotify(transactionType + \" successful!\");\n        setError(\"\");\n      })\n      .catch(error => {\n        setError(error.message);\n      })\n\n    }}>\n      <FormControl label={() => transactionType + \" amount:\"}>\n        <Input\n          type=\"number\"\n          value={amount}\n          onChange={(e) => setAmount(e.target.value)}\n          startEnhancer=\"$\"\n          required\n        />\n      </FormControl>\n\n      {transactionType === \"Transfer\" && (\n        <FormControl label={() => \"Destination Account #:\"}>\n          <Input\n            type=\"number\"\n            value={destination}\n            onChange={(e) => setDestination(e.target.value)}\n            startEnhancer=\"#\"\n            required\n          />\n        </FormControl>\n      )}\n\n      <ErrorBox error={error} />\n\n      <Button>Submit</Button>\n\n    </form>\n  );\n};\n\nexport default TransactionForm;"]},"metadata":{},"sourceType":"module"}